# AI Operator Helm Chart Values

# Operator image configuration
image:
  repository: ghcr.io/your-org/ai-operator
  tag: "0.1.0"
  pullPolicy: IfNotPresent

# Replica count
replicaCount: 1

# Resource limits
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# RBAC configuration
rbac:
  create: true
  serviceAccountName: ai-operator

# GitHub configuration
github:
  # GitHub GraphQL API endpoint
  graphqlEndpoint: "https://api.github.com/graphql"

  # GitHub organization
  organization: "my-org"

  # Repositories to monitor
  repositories:
    - "payment-service"
    - "user-service"
    - "inventory-service"

  # GitHub token (prefer using external secrets in production)
  # tokenSecretName: github-token
  # tokenSecretKey: token
  token: ""  # Set via --set or use secret

# AI/LLM configuration
ai:
  # AI endpoint (e.g., OpenAI, Anthropic, or self-hosted)
  endpoint: "https://api.anthropic.com/v1/messages"

  # Model to use
  model: "claude-3-5-sonnet-20241022"

  # API token (prefer using external secrets in production)
  # tokenSecretName: ai-token
  # tokenSecretKey: token
  token: ""  # Set via --set or use secret

  # Max tokens for AI responses
  maxTokens: 1024

  # Temperature (0-1, lower = more deterministic)
  temperature: 0.2

# Argo CD configuration (optional)
argocd:
  enabled: false
  url: "https://argocd-server.argocd.svc.cluster.local"

  # Argo CD token (prefer using external secrets)
  # tokenSecretName: argocd-token
  # tokenSecretKey: token
  token: ""  # Set via --set or use secret

# Logging configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "json"  # json or text

# Reconciliation defaults (can be overridden per PRReconciliationRule)
reconciliation:
  # Default interval for rules that don't specify
  defaultIntervalSeconds: 30

  # Maximum number of PRs to process per reconciliation cycle
  maxPRsPerCycle: 100

  # Retry configuration
  retryAttempts: 3
  retryBackoffSeconds: 5

# Metrics and monitoring
metrics:
  enabled: true
  port: 9090

# Health check configuration
healthcheck:
  enabled: true
  port: 8080
  livenessPath: /healthz
  readinessPath: /ready

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
